<%- include('partials/header', { title: 'Products' }) %>
<%- include('partials/navbar') %>

<main class="container">
  <h1 class="page-title">All Products</h1>

  <div class="filter-bar">
    <select name="sort" id="sort">
      <option value="default">Default Sorting</option>
      <option value="price-low-high">Price: Low to High</option>
      <option value="price-high-low">Price: High to Low</option>
      <option value="rating">Rating: High to Low</option>
    </select>
  </div>

  <div class="product-grid">
    <% if (products.length > 0) { %>
      <% products.forEach(product => { %>
        <div class="product-card">
          <div class="product-image">
            <img src="<%= product.image %>" alt="<%= product.name %>">
          </div>
          <div class="product-info">
            <span class="product-category"><%= product.category %></span>
            <h3 class="product-name"><%= product.name %></h3>
            <div class="product-rating">Rating: <%= product.rating %> ★</div>
            <div class="product-price">$<%= product.price.toFixed(2) %></div>
          </div>
          <div class="product-actions">
            
            <button 
              class="btn-wishlist <%= user.wishlist.includes(product._id) ? 'active' : '' %>" 
              data-id="<%= product._id %>"
            >
              ♥
            </button>
            
            <a 
              href="https://instagram.com/YourBrandInstagram" 
              target="_blank" 
              class="btn-buy"
            >
              Buy Now
            </a>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <p>No products found.</p>
    <% } %>
  </div>
</main>

<%- include('partials/footer') %>
